---
layout: post
title:  "npm related"
---

# 1.devDependencies
```json
"devDependencies": {
    "nodemon": "^3.1.0"
  }
```


# 2. bcrypt
```javascript
const bcrypt = require('bcrypt');

userSchema.pre('save', async function(next){ // before saving to the database, the function will run first
    if(this.isModified('password')){
        const hash = await bcrypt.hash(this.password, 10);
        this.password = hash
    }
    next();
})
```

```javascript
emailVerificationTokenSchema.methods.compareToken = async function(token) {
  const result = await bcrypt.compare(token, this.token);//this.token 这个schema的里的一个属性token
  return result;
}
```
- `bcrpt.compare()`:将明文值与哈希值进行比较, 第一个argument是明文，第二个是hashed value。